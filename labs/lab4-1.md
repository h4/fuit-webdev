# 4.1 Создание моделей приложения

Цель работы — создать приложение, позволяющее управлять каталогом книг в библиотеке

## Настройки проекта для работы с БД

1. В файле настроек проекта `settings.py` укажите подключение к базе данных:
   * Тип БД — sqlite3
   * Имя файла БД — data.db в корневом каталоге проекта
1. Создайте новое django-приложение `library`, используя подкоманду `startapp`
1. Закомментируйте приложения, предлагаемые Django по умолчанию и добавьте в кортеж `INSTALLED_APPS` приложение `library`

## Создание моделей

1. В файле `manage.py` создайте три модели:
   * Author
   * Book
   * Publisher
1. Структура полей модели *Author*:
   * *first_name* — «Имя», текстовое поле, максимальная длина — 32 символа
   * *last_name* — «Фамилия», текстовое поле, максимальная длина — 32 символа
   * *email* — «Электронная почта», поле для электронной почты, поле является необязательным для заполнения
1. Структура полей модели Book:
   * *title* — «Название», текстовое поле, максимальная длина — 128 символов
   * authors — «Авторы», поле отношений типа «Многие-ко-многим», связан с моделью `Author`
   * *publisher* — «Издательство», внешний ключ к модели `Publisher`
   * *publication_date* — «Дата выпуска», поле типа «Дата», по умолчанию — текущая дата (не забудьте импортировать в файл с моделями класс datetime из библиотеки datetime)
1. Структура полей модели *Publisher*:
   * *title* — «Название», текстовое поде, максимальная длина — 32 символа
   * *address* — «Адрес», полнотекстовое поле
   * *city* — «Город», текстовое поле, максимальная длина — 64 символа
   * *country* – «Страна», текстовое поле, максимальная длина 64 символа
   * *website* – «Адрес сайта», поле для вводе http-адреса
1. Проверьте корректность структуры моделей данных, используя команду `./manage.py validate`. При необходимости, исправьте ошибки
1. Добавьте к моделям методы строкового представления экземпляров `__unicode__`:
   * *Author* — «Фамилия Имя»
   * *Book* — «Название»
   * *Publisher* — «Название (Адрес сайта)»

## Построение структуры БД на основе моделей

1. Создайте таблицы в базе данных, используя команду `./manage.py syncdb`
1. Запустите интерпретатор sqlite командой `./manage.py dbshell`
1. Выполните команду `.tables` для просмотра списка таблиц в базе данных
1. Выйдите из интерпретатора, выполнив команду `.quit`
1. Выполните команду `./manage.py squall library` для вывода структуры таблиц на sql. Обратите внимание на структуру таблицы *library_book_authors*
1. Загрузите данные из файла data.json при помощи команды `./manage.py loaddata`