# Лабораторная работа 3.2

## Создание нового проекта

1. Создайте каталог ~/projects/
1. Активируйте виртуальное окружение *bart
1. Создайте новый django-проект *control_panel* в каталоге ~/projects/
1. Сделайте файл manage.py испольняемым
1. Выполните команду `./manage.py --version` и убедитесь, что вы работаете с Django 1.4.1
1. Запустите dev-сервер и откройте в браузере адрес http://127.0.0.1:8000
1. Остановите сервер и запустите его на прослушивание 8888 порта при обращении по любому ip: `./manage.py runserver 0.0.0.0:8888`
1. Проверьте, что теперь страница открывается при обращении на 8888 порт
1. Перезапустите сервер в нормальном режиме

## Базовые настройки проекта

1. Откройте файл `control_panel/settings.py`
1. Измените значение переменной `Debug` на `False`
1. Просмотрите изменения в браузере. Верните проект в режим отладки
1. Измените значения элементов переменной `ADMINS`
1. Создайте переменную `PROJECT_ROOT`, указывающую на каталог с проектом, используя методы объекта os.path ([http://docs.python.org/library/os.path.html])
1. Установите правильные значения для переменных `TIME_ZONE` и `LANGUAGE_CODE`
1. Использую переменную `PROJECT_ROOT` установите значения для переменных `MEDIA_ROOT` и `STATIC_ROOT` на каталоги *media* и *static* в корневом каталоге проекта соответственно
1. Добавьте в кортеж TEMPLATE_DIRS элемент, указывающий на каталог *templates*  в корневом каталоге проекта

## Отображение главной страницы

1. Создайте приложение *pages* используя команду `./manage.py startapp pages`
1. Добавьте приложение *pages* в кортеж `INSTALLED_APPS`
1. Создайте функцию `home` в файле `pages/views.py`. Функция принимает аргумент `request`. В теле функции создаётся переменная `context` типа `dict`. Элемент `ts` словаря `context` равная метке текущего времени. Функция возвращает вызов функции `render(request, 'home.html', context)`. Определение функции `render` импортируется из модуля `django.shortcuts`
1. Создайте файл `home.html` в каталоге `templates`
1. Сожержимое файла home.html:
    <!DOCTYPE html>
    <html>
    <head>
        <title>Django Application</title>
    </head>
    <body>
        <h1>Django Application</h1>

        <p>Дата и время: {{ ts }}</p>
    </body>
    </html>
1. Откройте файл `control_panel/urls.py`
1. Добавьте вызов функции `pages.views.home` при совпадении шаблона `url r'^$'`
1. Обновите в браузере страницу http://127.0.0.1:8000

## Использование фильтров шаблона

1. Измените вывод переменной `ts` в шаблоне на `{{ ts|date:"H:i" }}`
1. Обновите в браузере страницу http://127.0.0.1:8000
1. Измените параметры фильтра так, чтобы отображение соответствовало шаблону **12.09.2012, 07:34:22**
> Подробнее о фильтрах шаблонов: [https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#built-in-filter-reference](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#built-in-filter-reference)

## Вывод содержимого каталога /var/log

1. Вывод содержимого каталога `/var/log` должне осуществляться при обращении по адресу `/log/` в браузере, при этом выполняется функция `pages.views.listing`
1. В теле функции создаётся словарь `context`, в котором элементу `dir_content` присваивается список имён файлов и каталогов, содержащихся в каталоге `/var/log/`. Для получения списка используйте подходящий метод из библиотеки os: [http://docs.python.org/library/os.html#files-and-directories](http://docs.python.org/library/os.html#files-and-directories)
1. Результат отображается при помощи шаблона `listing.html`

	<h1>Листинг каталога <h1>{{ dir_name }}
	<ul>
	{% for item in dir_content %}
		<li>{{ item }}</li>
	{% endfor %}
	</ul>